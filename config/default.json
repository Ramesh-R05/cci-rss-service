{
  "solr": {
    "host": "solr01.digital.dev.local",
    "port": 80,
    "path": "/solr",
    "core": "{{site}}-search"
  },

  "queries": {

    "channel": {

      "default": {
        "q": "*:*",
        "fq": "nodeTypeAlias_t:\"Homepage\"",
        "rows": "1"
      }
    },

    "item": {

      "default": {
        "q": "*:*",
        "fq": "nodeTypeAlias_t:(BauerArticle OR Article)",
        "sort": "pageDateCreated_dt desc",
        "rows": "50"
      },

      "sponsored": {
        "q": "contentCampaign_t:*",
        "fq": "nodeTypeAlias_t:(BauerArticle OR Article)",
        "sort": "pageDateCreated_dt desc",
        "rows": "500"
      },

      "recipes": {
        "q": "*:*",
        "fq": "nodeTypeAlias_t:(Recipe)",
        "sort": "pageDateCreated_dt desc",
        "rows": "50"
      }

    }
  },

  "mappings": {

    "channel": {

      "default": {
        "title": {
          "map": [ "pageTitle_t", "contentTitle_t" ]
        },
        "feed_url": {
          "map": {
            "fn": "mapFeedUrl",
            "params": [
              "@__request"
            ]
          }
        },
        "site_url": {
          "map": "siteUrl_t"
        },
        "description": {
          "map": [ "pageMetaDescription_t", "contentSummary_t" ],
          "afterMap": [
            {
              "fn": "sanitise"
            }
          ]
        },
        "copyright": {
          "map": {
            "fn": "mapCopyright"
          }
        },
        "ttl": {
          "value": 60
        }
      },

      "sponsored": {
        "custom_namespaces": {
          "mapObject": {
            "mvcf": {
              "value": "http://feed.aww.com.au/ns/mvcf/"
            }
          }
        }
      }

    },

    "item": {

      "default": {
        "title": {
          "map": [ "pageTitle_t", "contentTitle_t", "nodeName_t" ]
        },
        "description": {
          "map": [ "pageMetaDescription_t", "contentSummary_t" ],
          "afterMap": [
            {
              "fn": "sanitise"
            }
          ]
        },
        "url": {
          "map": {
            "fn": "mapItemUrl",
            "params": [
              "@siteUrl_t",
              "@url_t"
            ]
          }
        },
        "enclosure": {
          "mapObject": {
            "url": {
              "map": "contentImageUrl_t",
              "afterMap": [
                {
                  "fn": "format",
                  "params": [
                    "%s?width=800"
                  ]
                }
              ]
            },
            "type": {
              "map": {
                "fn": "mapMimeType",
                "params": [
                  "@contentImageUrl_t"
                ]
              }
            }
          }
        }
      },

      "fullcontent": {
        "custom_elements": {
          "mapObjectArray": {
            "content:encoded": {
              "mapObject": {
                "_cdata": {
                  "map": {
                    "fn": "mapFullContent",
                    "params": [
                      {
                        "fn": "mapItemUrl",
                        "params": [
                          "@siteUrl_t",
                          "@url_t"
                        ]
                      },
                      "@contentBody_t"
                    ]
                  }
                }
              }
            }
          }
        }
      },

      "sponsored": {
        "categories": {
          "mapArray": [
            {
              "fn": "mapCampaignSponsor",
              "params": [
                "@contentCampaign_t"
              ]
            }
          ]
        },
        "custom_elements": {
          "mapObjectArray": {
            "mvcf:is_bauer_native": {
              "map": {
                "fn": "mapCampaignType",
                "params": [
                  "@contentCampaign_t",
                  "native"
                ]
              }
            },
            "mvcf:is_bauer_advertorial": {
              "map": {
                "fn": "mapCampaignType",
                "params": [
                  "@contentCampaign_t",
                  "advertorial"
                ]
              }
            }
          }
        }
      }

    }

  },

  "routes": {

    "default": {
      "path": "/",
      "data": [{
        "key": "channel",
        "query": "channel.default"
      }, {
        "key": "items",
        "query": "item.default"
      }]
    },

    "fullcontent": {
      "path": "/full-content",
      "data": [{
        "key": "channel",
        "query": "channel.default",
        "mappings": ["channel.default"]
      }, {
        "key": "items",
        "query": "item.default",
        "mappings": ["item.default", "item.fullcontent"]
      }]
    },

    "sponsored": {
      "path": "/sponsored",
      "data": [{
        "key": "channel",
        "query": "channel.default",
        "mappings": ["channel.default", "channel.sponsored"]
      }, {
        "key": "items",
        "query": "item.sponsored",
        "mappings": ["item.default", "item.sponsored"]
      }]
    },

    "recipes": {
      "path": "/recipes",
      "data": [{
        "key": "channel",
        "query": "channel.default",
        "mappings": ["channel.default"]
      }, {
        "key": "items",
        "query": "item.recipes",
        "mappings": ["item.default"]
      }]
    }

  },

  "sites": {

    "food": {
      "queries": {
        "item": {
          "default": {
            "fq": "nodeTypeAlias_t:(FoodArticle OR FoodStudioArticle OR Article)"
          },
          "sponsored": {
            "fq": "nodeTypeAlias_t:(FoodArticle OR FoodStudioArticle OR Article)"
          }
        }
      }
    },

    "food-nz": {
      "queries": {
        "item": {
          "default": {
            "fq": "nodeTypeAlias_t:(FoodArticle OR FoodStudioArticle OR Article)"
          },
          "sponsored": {
            "fq": "nodeTypeAlias_t:(FoodArticle OR FoodStudioArticle OR Article)"
          }
        }
      }
    }

  }
}